SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, CASE WHEN i.type = 1 THEN 'Agent' WHEN i.type = 2 THEN 'SNMP' WHEN i.type = 3 THEN 'IPMI' WHEN i.type = 4 THEN 'JMX' ELSE 'Unknown' END AS agent_type, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE g.name in  ('SPR-SD-Network','HCM-BD-Network','HNI-BD-Network','SDY-SD-Network','DJK-BD-Network','NDL-BD-Network','ULN-BD-Network','BBY-BD-Network')  ORDER BY h.hostid, i.interfaceid;


SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE i.type = 2 AND i.ip IS NOT NULL AND g.name IN ('SPR-SD-Network', 'HCM-BD-Network', 'HNI-BD-Network', 'SDY-SD-Network', 'DJK-BD-Network', 'NDL-BD-Network', 'ULN-BD-Network', 'BBY-BD-Network') ORDER BY h.hostid, i.interfaceid;

SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE g.name IN ('SPR-SD-Network', 'HCM-BD-Network', 'HNI-BD-Network', 'SDY-SD-Network', 'DJK-BD-Network', 'NDL-BD-Network', 'ULN-BD-Network', 'BBY-BD-Network') AND i.type = 2 ORDER BY h.hostid, i.interfaceid;



SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, CASE WHEN i.type = 2 THEN 'SNMP' WHEN EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping') THEN 'Ping' ELSE 'Unknown' END AS check_type, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE g.name IN ('SPR-SD-Network','HCM-BD-Network','HNI-BD-Network','SDY-SD-Network','DJK-BD-Network','NDL-BD-Network','ULN-BD-Network','BBY-BD-Network') AND (i.type = 2 OR EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping')) ORDER BY h.hostid, i.interfaceid;


SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, CASE WHEN i.type = 2 THEN 'SNMP' WHEN EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping') THEN 'Ping' ELSE 'Unknown' END AS check_type, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status, CASE WHEN (SELECT value FROM history_uint hu JOIN items it ON hu.itemid = it.itemid WHERE it.hostid = h.hostid AND it.key_ = 'icmpping' ORDER BY hu.clock DESC LIMIT 1) = 1 THEN 'OK' ELSE 'Not OK' END AS ping_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE g.name IN ('SPR-SD-Network','HCM-BD-Network','HNI-BD-Network','SDY-SD-Network','DJK-BD-Network','NDL-BD-Network','ULN-BD-Network','BBY-BD-Network') AND (i.type = 2 OR EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping')) ORDER BY h.hostid, i.interfaceid;

SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, CASE WHEN i.type = 2 THEN 'SNMP' WHEN EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping') THEN 'Ping' ELSE 'Unknown' END AS check_type, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status, CASE WHEN (SELECT value FROM history_uint hu JOIN items it ON hu.itemid = it.itemid WHERE it.hostid = h.hostid AND it.key_ = 'icmpping' ORDER BY hu.clock DESC LIMIT 1) = 1 THEN 'OK' ELSE 'Not OK' END AS ping_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid WHERE g.name IN ('SPR-SD-Network','HCM-BD-Network','HNI-BD-Network','SDY-SD-Network','DJK-BD-Network','NDL-BD-Network','ULN-BD-Network','BBY-BD-Network') AND (i.type = 2 OR EXISTS (SELECT 1 FROM items it WHERE it.hostid = h.hostid AND it.key_ = 'icmpping')) ORDER BY h.hostid, i.interfaceid;


SELECT h.host AS hostname, i.ip AS ip_address, g.name AS host_group, 'SNMP' AS agent_type, CASE WHEN h.status = 0 THEN 'Enabled' ELSE 'Disabled' END AS host_status, CASE WHEN hu.value = 1 THEN 'OK' ELSE 'Not OK' END AS ping_status FROM hosts h JOIN interface i ON h.hostid = i.hostid JOIN hosts_groups hg ON h.hostid = hg.hostid JOIN hstgrp g ON hg.groupid = g.groupid LEFT JOIN items it ON h.hostid = it.hostid AND it.key_ = 'icmpping' LEFT JOIN history_uint hu ON it.itemid = hu.itemid AND hu.clock = (SELECT MAX(clock) FROM history_uint WHERE itemid = it.itemid) WHERE i.type = 2 AND g.name IN ('SPR-SD-Network','HCM-BD-Network','HNI-BD-Network','SDY-SD-Network','DJK-BD-Network','NDL-BD-Network','ULN-BD-Network','BBY-BD-Network') ORDER BY h.hostid, i.interfaceid;
